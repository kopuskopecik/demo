version: "3.7"

services:
  backend:
    build:
      context: .
    image: mydemo:1.0.0
    container_name: mydemo
    restart: always
    ports:
      - "8000:8000"
    volumes:
      - .:/mydemo
  
  frontend:
      restart: unless-stopped
      image: staticfloat/nginx-certbot
      ports:
          - 80:80/tcp
          - 443:443/tcp
      environment:
          CERTBOT_EMAIL: erdgnsahn@gmail.com
      volumes:
        - ./conf.d:/etc/nginx/user.conf.d:ro
        - letsencrypt:/etc/letsencrypt
volumes:
  letsencrypt:
